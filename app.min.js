"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var ThingsThatLastedLongerThanTheConfederacy=/*#__PURE__*/function(){function ThingsThatLastedLongerThanTheConfederacy(opts){_classCallCheck(this,ThingsThatLastedLongerThanTheConfederacy);this.opts=opts||{};this.year_start=1861;this.year_end=1865;this.year_diff=this.year_end-this.year_start}_createClass(ThingsThatLastedLongerThanTheConfederacy,[{key:"onDisplay",value:function onDisplay(result){var still_lasting=!result.year_end;var year_end=!still_lasting?result.year_end:new Date().getFullYear();var year_diff=parseInt(year_end,10)-parseInt(result.year_start,10);var year_times=Math.floor(year_diff/this.year_diff);var subtitle_times=function(){switch(year_times){case 1:return"longer than";case 2:return"twice as long as";case 3:return"thrice as long as";default:break;}return"".concat(year_times," times longer than")}();this.opts.title.innerText=result.thing_name;this.opts.subtitle.innerText="".concat(still_lasting?"has ":"","lasted ").concat(subtitle_times," the Confederacy");this.opts.years.innerText="(".concat(result.year_start," - ").concat(still_lasting?"preset":result.year_end,")");if(result.source_url){this.opts.source.href=result.source_url;this.opts.source.className="source"}}},{key:"onLoad",value:function onLoad(csv){var _Papa$parse=Papa.parse(csv,{header:true,skipEmptyLines:true}),data=_Papa$parse.data;var random_index=Math.floor(Math.random()*data.length);var result=data.slice(random_index).shift();this.onDisplay(result)}},{key:"init",value:function init(){var _this=this;var xhr=new XMLHttpRequest;xhr.addEventListener("load",function(){_this.onLoad(xhr.response)});xhr.open("GET",this.opts.data);xhr.send(null)}}]);return ThingsThatLastedLongerThanTheConfederacy}();window.ThingsThatLastedLongerThanTheConfederacy=ThingsThatLastedLongerThanTheConfederacy;
